<?xml version="1.0"?>
<odoo> 

  <!-- This record will allow membership to be viewed by certain viewers -->
  <record id="membership.view_partner_form" model="ir.ui.view">
    <field name="name">res.partner.form.inherit</field>
    <field name="model">res.partner</field>
    <field name="groups_id" eval="[(6,0,[ref('members_custom.member_group_manager'), ref('members_custom.member_group_agent'), ref('members_custom.member_group_complaint_management')])]"/>
  </record>

  <!-- This record will add search view for leaders -->
  <record id="leader_view_search" model="ir.ui.view">
    <field name="name">res.partner.search.leader</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <search>
        <field name="name" string="Names" filter_domain="[('name', 'ilike', self)]"/>
        <field name="phone" string="Phone" filter_domain="[('phone', 'ilike', self)]"/>
        <group expand="0" string="Group By" colspan="10" col="8">
          <filter name="leadership_status" string="Status" context="{'group_by': 'leadership_status'}"/>
          <filter name="grade" string="Grade" context="{'group_by': 'grade'}"/>
          <filter name="start_of_membership" string="Start of Membership" context="{'group_by': 'start_of_membership'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- This record will add search view for members -->
  <record id="member_view_search" model="ir.ui.view">
    <field name="name">res.partner.search.member</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <search>
        <field name="name" string="Names" filter_domain="[('name', 'ilike', self)]"/>
        <field name="phone" string="Phone" filter_domain="[('phone', 'ilike', self)]"/>
        <group expand="0" string="Group By" colspan="10" col="8">
          <filter name="grade" string="Grade" context="{'group_by': 'grade'}"/>
          <filter name="start_of_membership" string="Start of Membership" context="{'group_by': 'start_of_membership'}"/>
          <filter name="stock" string="Stock" context="{'group_by': 'stock'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- This record will add search view for leagues -->
  <record id="league_view_search" model="ir.ui.view">
    <field name="name">res.partner.search.league</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <search>
        <field name="name" string="Names" filter_domain="[('name', 'ilike', self)]"/>
        <field name="phone" string="Phone" filter_domain="[('phone', 'ilike', self)]"/>
        <group expand="0" string="Group By" colspan="10" col="8">
          <filter name="league_status" string="Status" context="{'group_by': 'league_status'}"/>
          <filter name="grade" string="Grade" context="{'group_by': 'grade'}"/>
          <filter name="start_of_membership" string="Start of Membership" context="{'group_by': 'start_of_membership'}"/>
          <filter name="league_type" string="Type" context="{'group_by': 'league_type'}"/>
          <filter name="league_org" string="League Organization" context="{'group_by': 'league_org'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- This record will hold tree view for members -->
  <record id="res_partner_tree_view" model="ir.ui.view">
    <field name="name">Members</field>
    <field name="model">res.partner</field>
    <field name="groups_id" eval="[(6,0,[ref('members_custom.member_group_manager'), ref('members_custom.member_group_agent'), ref('members_custom.member_group_complaint_management')])]"/>
    <field name="arch" type="xml">
      <tree>
        <field name="create_date"/>
        <field name="name"/>
        <field name="age"/>
        <field name="gender"/>
        <field name="ethnic_group"/>
        <field name="phone"/>
        <field name="education_level"/>
        <field name="start_of_membership"/>
        <field name="membership_org"/>
        <field name="member_responsibility"/>
        <field name="grade"/>
        <field name="subcity_id"/>
        <field name="wereda_id"/>
        <field name="payed_for_id"/>
      </tree>
    </field>
  </record>

  <!-- This record will hold tree view for leader -->
  <record id="res_partner_leader_tree_view" model="ir.ui.view">
    <field name="name">Leaders</field>
    <field name="model">res.partner</field>
    <field name="groups_id" eval="[(6,0,[ref('members_custom.member_group_manager'), ref('members_custom.member_group_agent'), ref('members_custom.member_group_complaint_management')])]"/>
    <field name="arch" type="xml">
      <tree>
        <field name="create_date"/>
        <field name="name"/>
        <field name="age"/>
        <field name="gender"/>
        <field name="ethnic_group"/>
        <field name="phone"/>
        <field name="education_level"/>
        <field name="start_of_membership"/>
        <field name="membership_org"/>
        <field name="leader_responsibility"/>
        <field name="experience"/>
        <field name="grade"/>
        <field name="subcity_id"/>
        <field name="wereda_id"/>
        <field name="payed_for_id"/>
      </tree>
    </field>
  </record>

  <!-- This record will hold tree view for leagues -->
  <record id="res_partner_league_tree_view" model="ir.ui.view">
    <field name="name">Leagues</field>
    <field name="model">res.partner</field>
    <field name="groups_id" eval="[(6,0,[ref('members_custom.member_group_manager'), ref('members_custom.member_group_agent'), ref('members_custom.member_group_complaint_management')])]"/>
    <field name="arch" type="xml">
      <tree>
        <field name="create_date"/>
        <field name="name"/>
        <field name="age"/>
        <field name="gender"/>
        <field name="ethnic_group"/>
        <field name="education_level"/>
        <field name="start_of_membership"/>
        <field name="league_org"/>
        <field name="league_type"/>
        <field name="league_status"/>
        <field name="subcity_id"/>
        <field name="wereda_id"/>
        <field name="payed_for_id"/>
      </tree>
    </field>
  </record>

  <!-- This record will add new fields to the res_partner views -->
  <record id="res_partner_kanban_view_copied" model="ir.ui.view">
    <field name="name">res.partner.kanban.view</field>
    <field name="model">res.partner</field>
    <field name="groups_id" eval="[(6,0,[ref('members_custom.member_group_manager'), ref('members_custom.member_group_agent'), ref('members_custom.member_group_complaint_management')])]"/>
    <field name="arch" type="xml">
        <kanban class="o_res_partner_kanban" sample="1">
          <field name="id"/>
          <field name="image_1920"/>
          <field name="name"/>
          <field name="age"/>
          <field name="evaluated"/>
          <field name="leadership_status"/>
          <field name="is_leader"/>
          <field name="wereda_id"/>
          <field name="subcity_id"/>
          <field name="region"/>
          <templates>
              <t t-name="kanban-box">
                  <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_partner_kanban">
                      <t t-if="record.id.raw_value">
                          <t t-set="placeholder" t-value="'/base/static/img/avatar_grey.png'"/>
                          <div class="o_kanban_image_fill_left o_kanban_image_full" t-attf-style="background-image: url(#{kanban_image('res.partner', 'image_1920', record.id.raw_value, placeholder)})" role="img"/>
                      </t>
                      <div class="oe_kanban_details d-flex flex-column justify-content-between">
                          <div class="o_kanban_record_top">
                              <div class="o_kanban_record_headings">
                                  <strong class="o_kanban_record_title">
                                    <t t-if="record.is_leader.raw_value">
                                      <div class="float-right">
                                        <t t-if="record.evaluated.raw_value">
                                          <span class="fa fa-eye text-success" role="img"/>
                                        </t>
                                        <t t-else="">
                                          <span class="fa fa-eye text-danger" role="img"/>
                                        </t>
                                        <t t-if="record.leadership_status.raw_value == 'active'">
                                          <span class="fa fa-check text-success" role="img"/>
                                        </t>
                                        <t t-else="record.leadership_status.raw_value == 'inactive'">
                                          <span class="fa fa-check text-danger" role="img"/>
                                        </t>
                                      </div>
                                    </t>
                                    <ul>
                                      <li t-if="record.name.raw_value or record.age.raw_value">
                                        <t t-if="record.name.raw_value"><field name="name"/><t t-if="record.age.raw_value">, <field name="age"/></t></t>
                                      </li>
                                    </ul>
                                  </strong>
                              </div>
                          </div>
                          <div>
                              <div class="o_kanban_tags_section oe_kanban_partner_categories"/>
                              <ul>
                                  <li t-if="record.subcity_id.raw_value or record.wereda_id.raw_value">
                                      <t t-if="record.subcity_id.raw_value"><field name="subcity_id"/><t t-if="record.wereda_id.raw_value">, </t></t>
                                      <t t-if="record.wereda_id.raw_value"><field name="wereda_id"/><t t-if="record.region.raw_value">, </t></t>
                                      <t t-if="record.region.raw_value"><field name="region"/></t>
                                  </li>
                              </ul>
                          </div>
                          <div>
                              <div class="o_kanban_tags_section oe_kanban_partner_categories"/>
                              <ul>
                                  <li t-if="record.phone.raw_value" class="o_text_overflow"><field name="phone"/></li>
                              </ul>
                          </div>
                          <div class="o_kanban_record_bottom">
                              <div class="oe_kanban_bottom_left"/>
                              <div class="oe_kanban_bottom_right"/>
                          </div>
                      </div>
                  </div>
              </t>
          </templates>
        </kanban>
    </field>
  </record>

  <!-- <record id="demo_view_partner_form" model="ir.ui.view">
     <field name="name">res.partner.form.inherit</field>
     <field name="model">res.partner</field>
     <field name="inherit_id" ref="base.view_partner_form"/>
     <field name="arch" type="xml">
      <xpath expr="//page[13]" position="attributes">
         <attribute name='invisible'>1</attribute> 
       </xpath>
     </field>
  </record> -->
  

  <!-- This record will add new fields to the res_partner views -->
  <record id="membership_view_partner_form" model="ir.ui.view">
    <field name="name">membership.form</field>
    <field name="model">res.partner</field>
    <field name="groups_id" eval="[(6,0,[ref('members_custom.member_group_manager'), ref('members_custom.member_group_agent'), ref('members_custom.member_group_complaint_management')])]"/>
    <field name="arch" type="xml">
      <form>
        <field name="appropriate_age" invisible="1"/>
        <field name="has_user_name" invisible="1"/>
        <button type="object" name="action_portal_reset_member_password" string="Reset Member Password" class="fa fa-key" icon="fa-key-o" attrs="{'invisible': [('has_user_name', '=', False)]}"/>
        <header>
          <button name="archive_record" string="Archive" type="object" groups="members_custom.member_group_manager" attrs="{'invisible': [('active', '=', False)]}"/>
          <button name="un_archive_record" string="Unarchive" type="object" groups="members_custom.member_group_manager" attrs="{'invisible': [('active', '=', True)]}"/>
          <button type="object" name="create_leader" string="Create a Leader" groups="members_custom.member_group_manager" class="oe_highlight float-left" attrs="{'invisible': ['|', ('is_member', '=', False), ('is_leader', '=', True)]}"/>
          <button type="object" name="create_league" string="Create League" class="oe_highlight float-left" attrs="{'invisible': ['|', ('is_league', '=', True), ('is_leader', '=', True)]}"/>
          <button type="object" name="create_member" string="Create Member" groups="members_custom.member_group_manager" class="oe_highlight float-left" attrs="{'invisible': ['|', '|', ('is_member', '=', True), ('is_leader', '=', True), ('appropriate_age', '=', False)]}"/>
        </header>        
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button class="oe_stat_button" name="%(base.action_attachment)d" type="action" icon="fa-files-o">
              <field name="attachment_amount" string="Attachments" widget="statinfo"/>
            </button>
            <!-- <div class="ribbon-bookmark-v">
              <div class="ribbon-fold btn btn-warning" attrs="{'invisible': [('was_supporter', '=', False)]}">Supporter</div>
              <div class="ribbon-fold btn btn-danger" attrs="{'invisible': [('was_candidate', '=', False)]}">Candidate</div>
              <div class="ribbon-fold btn btn-success" attrs="{'invisible': [('was_league', '=', False)]}">League</div>
              <div class="ribbon-fold btn btn-info" attrs="{'invisible': [('was_member', '=', False)]}">Member</div>
              <div class="ribbon-fold btn btn-primary" attrs="{'invisible': [('is_leader', '=', False)]}">Leader</div>
            </div> -->
          </div>

          <h1>
            <field name="name" required="1" placeholder="Eg. John Doe Smith"/>
          </h1>

          <group>
            <group>
              <field name="is_league" invisible="1"/>
              <field name="is_member" invisible="1"/>
              <field name="is_leader" invisible="1"/>
              <field name="is_woman" invisible="1"/>
              <field name="active" invisible="1"/>
              <separator string="Personal Informations"/>
                <field name="gender" string="Gender"/>
                <field name="age" string="Age"/>
                <field name="ethnic_group" string="Ethnic Group"/>
              <separator string="Educational Background"/>
                <field name="education_level" string="Education Level"/>
                <field name="field_of_study_id" widget="many2many_tags" string="Field of Study" options="{'no_create': True, 'no_create_edit': True}"/>
              <separator string="Additional Information"/>
                <field name="candidate_id" string="Candidate" attrs="{'invisible': [('was_candidate', '=', False)]}"/>
                <field name="supporter_id" string="Supporter" attrs="{'invisible': [('was_candidate', '=', False)]}"/>  
                <field name="user_name"/>
                <field name="national_id"/>          
            </group>
            <group>
              <separator string="Place of Birth"/>
                <field name="region_of_birth" string="Birth Place Region"/>
                <field name="zone_city_of_birth"/>
                <field name="wereda_of_birth" string="Birth Place Woreda"/>
              <separator string="Current Address"/>
                <field name="region" string="Region" options="{'no_create': True, 'no_create_edit': True}"/>
                <field name="subcity_id" string="Subcity" options="{'no_create': True, 'no_create_edit': True}" force_save="1"/>
                <field name="wereda_id" string="Woreda" options="{'no_create': True, 'no_create_edit': True}" force_save="1"/>
                <field name="kebele" string="Kebele"/>
                <field name="phone"/>
                <field name="email_address"/>
                <field name="was_supporter" invisible="1"/>
                <field name="was_candidate" invisible="1"/>
                <field name="was_member" invisible="1"/>
                <field name="was_league" invisible="1"/>
            </group>
          </group>
          <notebook>
            <page name="internal_notes" string="Internal Notes" attrs="{'invisible': [('is_leader', '=', False)]}">
                <field name="comment" placeholder="Internal note..."/>
            </page>

            <page string="Membership" attrs="{'invisible': [('is_member', '=', False)]}">
              <group>
                <group>
                  <separator string="Membership Organized Under"/>
                  <field name="main_office" force_save="1"/>
                  <field name="member_cells" force_save="1"/>
                  <field name="membership_org" string="Membership Organization" options="{'no_create': True, 'no_create_edit': True}" attrs="{'required': ['|', ('is_member', '=', True), ('is_leader', '=', True)]}"/>
                  <field name="member_responsibility" options="{'no_create': True, 'no_create_edit': True}"/>
                  <field name="stock" attrs="{'invisible': [('is_member', '=', False)]}"/>
                </group>
                <group>
                  <separator string="Membership"/>
                  <field name="start_of_membership" string="Start of Membership" attrs="{'required': ['|', ('is_member', '=', True), ('is_leader', '=', True)]}"/>
                  <field name="grade" string="Grade"/>
                  <field name="key_strength" string="Key Strength" widget="many2many_tags" attrs="{'invisible': [('is_leader', '=', True)]}"/>
                  <field name="key_weakness" string="Key Weakness" widget="many2many_tags" attrs="{'invisible': [('is_leader', '=', True)]}"/>
                </group>
              </group>
            </page>

            <page string="Leader Information" attrs="{'invisible': [('is_leader', '=', False)]}">
              <group>
                <group>
                  <separator string="Leader Grouping"/>
                  <field name="main_office" force_save="1"/>
                  <field name="member_cells" force_save="1"/>              
                  <field name="membership_org" string="Membership Organization" options="{'no_create': True, 'no_create_edit': True}" attrs="{'required': ['|', ('is_member', '=', True), ('is_leader', '=', True)]}"/>
                  <field name="leader_responsibility" options="{'no_create': True, 'no_create_edit': True}"/>
                  <field name="experience" string="Leader Experience"/>
                  <field name="leadership_status" string="Leadership Status"/>
                </group>
                <group>
                  <separator string="Leader"/>
                  <field name="start_of_membership" string="Start of Membership" attrs="{'required': ['|', ('is_member', '=', True), ('is_leader', '=', True)]}"/>
                  <field name="gov_responsibility"/>
                  <separator string="Demote To Member only"/>
                  <field name="demote_to_member" string="Demote"/>
                </group>
              </group>
            </page>

            <page string="League Information" attrs="{'invisible': [('is_league', '=', False)]}">
              <group>
                <group>
                  <separator string="League Grouping"/>
                  <field name="league_main_office" force_save="1"/>
                  <field name="league_member_cells" force_save="1"/>              
                  <field name="league_type" string="League Type"/>
                  <field name="league_org" string="League Organization" attrs="{'required': [('is_league', '=', True)]}"/>
                  <field name="league_status" string="League Responsibility"/>
                </group>
                <group>
                  <separator string="League"/>
                  <field name="start_of_league" string="Start of League" attrs="{'required': [('is_league', '=', True)]}"/>
                  <field name="grade" string="Grade"/>
                  <field name="key_strength" string="Key Strength" widget="many2many_tags" attrs="{'invisible': [('is_leader', '=', True)]}"/>
                  <field name="key_weakness" string="Key Weakness" widget="many2many_tags" attrs="{'invisible': [('is_leader', '=', True)]}"/>
                  <field name="gov_responsibility"/>
                </group>
              </group>
            </page>

            <page string="Evaluation Form" attrs="{'invisible': [('is_leader', '=', False)]}">
              <field name="evaluation_ids">
                <tree>
                  <field name="evaluated" invisible="1"/>
                  <field name="grade"/>
                  <button name="finish_evaluation" string="Finish Evaluation" type="object" class="oe_highlight" attrs="{'invisible': [('evaluated', '=', True)]}"/>
                </tree>
                <form>
                  <sheet>
                    <group>
                      <field name="partner_id" invisible="1"/>
                      <field name="evaluated" invisible="1"/>
                      <field name="evaluation_main_points"/>
                    </group>
                    <group>
                      <group class="col-4">
                          <field name="key_strength" string="Key Strength" widget="many2many_tags"/>
                      </group>
                      <group class="col-4">
                          <field name="key_weakness" string="Key Weakness" widget="many2many_tags"/>
                      </group>
                      <group class="col-4">
                          <field name="grade" string="Grade"/>
                      </group>
                    </group>
                    <group>
                      <group class="col-6">
                          <field name="decision" string="Decision"/>
                      </group>
                      <group class="col-6">
                        <button name="add_attachment" string="Attachment" type="object" class="oe_highlight fa fa-paperclip"/>
                      </group>
                    </group>
                  </sheet>
                </form>
              </field>
            </page>

            <page string="Work Experience">
              <field name="work_experience_ids">
                <tree decoration-success="current_job == True" decoration-muted="current_job == False">
                  <field name="name"/>
                  <field name="place_of_work"/>
                  <field name="years_of_service"/>
                  <field name="current_job"/>
                </tree>
                <form>
                  <sheet>
                    <group>
                      <group>
                        <field name="name"/>
                        <field name="place_of_work"/>
                      </group>
                      <group>
                        <field name="years_of_service"/>
                        <field name="current_job"/>
                      </group>
                    </group>
                  </sheet>
                </form>
              </field>
            </page>

            <page string="Trainings" attrs="{'invisible': [('is_leader', '=', False)]}">
              <group>
                <group>
                  <field name="training_counter"/>
                </group>
                <field name="training_ids" readonly="1">
                  <tree editable="top" delete="false">
                    <field name="training_center" options="{'no_create': True, 'no_create_edit': True}"/>
                    <field name="training_type"/>
                    <field name="training_round"/>
                    <field name="training_year"/>
                    <field name="training_result"/>
                  </tree>
                </field>
              </group>
            </page>

            <page string="Payments" name="membership_payment" attrs="{'invisible': [('is_member', '=', False)]}">
              <group>
                <group>
                  <separator string="Membership Fee"/>
                  <field name="income" string="Income" force_save="1"/>
                  <field name="payment_method" widget="radio" options="{'horizontal': true}" force_save="1"/>
                  <label for="membership_monthly_fee_percent" string="Monthly Fee Percent" attrs="{'invisible': [('payment_method', '=', 'cash')]}"/>
                    <div>
                      <field name="membership_monthly_fee_percent" class="oe_inline" string="Monthly Fee Percent" attrs="{'invisible': [('payment_method', '=', 'cash')]}" force_save="1"/>
                      <span class="ml8" attrs="{'invisible': [('payment_method', '=', 'cash')]}"> %</span>
                    </div>
                  <field name="membership_monthly_fee_cash" string="Monthly Fee Cash" attrs="{'invisible': [('payment_method', '=', 'percentage')]}" force_save="1"/>
                  <field name="membership_monthly_fee_cash_from_percent" string="Monthly Fee In Cash" attrs="{'invisible': [('payment_method', '=', 'cash')]}" force_save="1"/>
                </group>
                <group>
                  <separator string="Payment Follow-Up"/>
                  <field name="type_of_payment" string="Payment Methods" widget="radio" options="{'horizontal': true}"/>
                  <field name="track_member_fee" force_save="1"/>
                </group>
                <group>
                  <field name="year_of_payment"/>
                </group>
                  <field name="membership_payments">
                    <tree delete="false" create="false">
                      <field name="member_id"/>
                      <field name="year"/>
                      <field name="month"/>
                      <field name="fee_amount"/>
                      <field name="amount_paid"/>
                      <field name="amount_remaining" string="Amount Remaining"/>
                      <field name="type_of_payment"/>
                      <field name="state"/>
                    </tree>
                  </field>
              </group>
            </page>

            <page string="Payments" name="membership_payment" attrs="{'invisible': [('is_leader', '=', False)]}">
              <group>
                <group>
                  <separator string="Membership Fee"/>
                  <field name="income" string="Income" force_save="1"/>
                  <field name="payment_method" widget="radio" options="{'horizontal': true}" force_save="1"/>
                  <label for="membership_monthly_fee_percent" string="Monthly Fee Percent" attrs="{'invisible': [('payment_method', '=', 'cash')]}"/>
                    <div>
                      <field name="membership_monthly_fee_percent" class="oe_inline" string="Monthly Fee Percent" attrs="{'invisible': [('payment_method', '=', 'cash')]}" force_save="1"/>
                      <span class="ml8" attrs="{'invisible': [('payment_method', '=', 'cash')]}"> %</span>
                    </div>
                  <field name="membership_monthly_fee_cash" string="Monthly Fee Cash" attrs="{'invisible': [('payment_method', '=', 'percentage')]}" force_save="1"/>
                  <field name="membership_monthly_fee_cash_from_percent" string="Monthly Fee In Cash" attrs="{'invisible': [('payment_method', '=', 'cash')]}" force_save="1"/>
                </group>
                <group>
                  <separator string="Payment Follow-Up"/>
                  <field name="type_of_payment" string="Payment Methods" widget="radio" options="{'horizontal': true}"/>
                  <field name="track_member_fee" force_save="1"/>
                </group>
                <group>
                  <field name="year_of_payment"/>
                </group>
                  <field name="membership_payments">
                    <tree delete="false" create="false">
                      <field name="member_id"/>
                      <field name="year"/>
                      <field name="month"/>
                      <field name="fee_amount"/>
                      <field name="amount_paid"/>
                      <field name="amount_remaining" string="Amount Remaining"/>
                      <field name="type_of_payment"/>
                      <field name="state"/>
                    </tree>
                  </field>
              </group>
            </page>

            <page string="League Payments" name="league_payment" attrs="{'invisible': [('is_league', '=', False)]}">
              <group>
                <group>
                  <field name="pay_for_league" string="Pay as a League"/>
                  <field name="league_payment" attrs="{'invisible': [('pay_for_league', '=', False)]}" force_save="1"/>
                </group>
                <group>
                  <separator string="Payment Follow-Up"/>
                  <field name="type_of_payment" string="Payment Methods" widget="radio" options="{'horizontal': true}"/>
                  <field name="track_league_fee" force_save="1" />
                </group>
                <group>
                  <field name="year_of_payment"/>
                </group>
                  <field name="league_payments">
                    <tree delete="false" create="false">
                      <field name="league_id"/>
                      <field name="year"/>
                      <field name="month"/>
                      <field name="fee_amount"/>
                      <field name="amount_paid"/>
                      <field name="amount_remaining" string="Amount Remaining"/>
                      <field name="type_of_payment"/>
                      <field name="state"/>
                    </tree>
                  </field>    
              </group>
            </page>        

            <page string="Member Transfer">
              <field name="member_transfer" readonly="1">
                <tree>
                  <field name="wereda_id" invisible="1"/>
                  <field name="partner_id"/>
                  <field name="from_subcity_id"/>
                  <field name="from_wereda_id"/>
                  <field name="state"/>
                </tree>
                <form>
                  <header>
                    <field name="wereda_id" invisible="1"/>
                    <field name="correct_user" invisible="1"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,waiting for approval,approved,rejected"/>
                  </header>
                  <sheet>
                    <group>
                      <group>
                        <separator string="Member Current Place"/>
                        <field name="is_league" invisible="1"/>
                        <field name="is_leader" invisible="1"/>
                        <field name="is_member" invisible="1"/>
                        <field name="wereda_id" invisible="1"/>
                        <field name="partner_id" string="Member"/>
                        <field name="transfer_as_a_league_or_member" string="Transfer As" attrs="{'invisible': [('is_league', '=', False)]}"/>
                        <field name="transfer_as_a_leader_or_member" string="Transfer As" attrs="{'invisible': [('is_leader', '=', False)]}"/>
                        <separator string="Transfer From"/>
                        <field name="from_subcity_id" string="From Subcity" force_save="1"/>
                        <field name="from_wereda_id" string="From Woreda" force_save="1"/>
                        <field name="from_main_office" string="From Main Office" force_save="1"/>
                        <field name="from_member_cells" string="From Cell" force_save="1"/>
                      </group>
                      <group>
                        <separator string="Experience and Work"/>
                        <field name="place_of_work" force_save="1"/>
                        <field name="responsibility_in_gov" force_save="1"/>
                        <separator string="Tranfer To"/>
                        <field name="transfer_membership_org" attrs="{'invisible': ['|', '|', ('is_member', '=', False), ('transfer_as_a_league_or_member', '=', 'league'), ('transfer_as_a_leader_or_member', '=', 'leader')]}"/>
                        <field name="transfer_league_org" attrs="{'invisible': ['|', ('is_league', '=', False), ('transfer_as_a_league_or_member', '=', 'member')]}"/>
                        <field name="transfer_responsibility_league" string="To League Responsibility" attrs="{'invisible': [('transfer_as_a_league_or_member', '=', 'member')]}"/>
                        <field name="transfer_responsibility_member" string="To Member Responsibility" attrs="{'invisible': ['|', ('transfer_as_a_league_or_member', '=', 'league'), ('is_member', '=', False)]}"/>
                        <field name="transfer_responsibility_leader" string="To Leader Responsibility" attrs="{'invisible': ['|', ('transfer_as_a_league_or_member', '=', 'league'), ('is_leader', '=', False)]}"/>
                        <field name="transfer_subcity_id" string="To Subcity"/>
                        <field name="transfer_wereda_id" string="To Woreda"/>
                        <field name="transfer_main_office" string="To Main Office" attrs="{'invisible': ['|', ('transfer_as_a_league_or_member', '=', 'league'), '&amp;', ('transfer_as_a_league_or_member', '=', 'member'), ('transfer_as_a_leader_or_member', '=', 'leader')]}"/>
                        <field name="transfer_member_cells" string="To Cell" attrs="{'invisible': ['|', ('transfer_as_a_league_or_member', '=', 'league'), '&amp;', ('transfer_as_a_league_or_member', '=', 'member'), ('transfer_as_a_leader_or_member', '=', 'leader')]}"/>
                        <field name="transfer_league_main_office" string="To League Main Office" attrs="{'invisible': [('transfer_as_a_league_or_member', '=', 'member')]}"/>
                        <field name="transfer_league_member_cells" string="To League Cell" attrs="{'invisible': [('transfer_as_a_league_or_member', '=', 'member')]}"/>  
                        <field name="responsibility_state"/>
                        <field name="receiving_manager" string="Receiving Manager"/>
                      </group>
                    </group>
                    <notebook>
                      <page string="Membership Information" attrs="{'invisible': [('is_member', '=', False)]}">
                        <group>
                          <group>
                            <separator string="Current Membership Information"/>
                              <field name="membership_org" force_save="1"/>
                              <field name="responsibility_in_org_member" string="Responsibility in Organization" force_save="1"/>
                              <field name="membership_status" force_save="1"/>
                              <field name="membership_fee" force_save="1"/>
                          </group>
                          <group>
                            <separator string="Evaluations"/>
                              <field name="grade" force_save="1"/>
                              <field name="key_strength" widget="many2many_tags" force_save="1"/>
                              <field name="key_weakness" widget="many2many_tags" force_save="1"/>
                          </group>
                        </group>
                      </page>
                      <page string="League Information" attrs="{'invisible': [('is_league', '=', False)]}">
                        <group>
                          <group>
                            <separator string="Current League Information"/>
                              <field name="league_org" force_save="1"/>
                              <field name="responsibility_in_org_league" string="Responsibility in Organization" force_save="1"/>
                              <field name="league_fee" force_save="1"/>
                          </group>
                          <group>
                            <separator string="Evaluations"/>
                              <field name="grade" force_save="1"/>
                              <field name="key_strength" widget="many2many_tags" force_save="1"/>
                              <field name="key_weakness" widget="many2many_tags" force_save="1"/>
                          </group>
                        </group>
                      </page>
                      <page string="Leader Information" attrs="{'invisible': [('is_leader', '=', False)]}">
                        <group>
                          <group>
                            <separator string="Current Leadership Information"/>
                              <field name="responsibility_in_org_leader" string="Responsibility in Organization" force_save="1"/>
                              <field name="leadership_experience" force_save="1"/>
                              <field name="leadership_status" force_save="1"/>
                              <field name="membership_fee" force_save="1"/>
                              <field name="membership_org" force_save="1"/>
                          </group>
                          <group>
                            <separator string="Evaluations"/>
                              <field name="grade" force_save="1"/>
                              <field name="key_strength" widget="many2many_tags" force_save="1"/>
                              <field name="key_weakness" widget="many2many_tags" force_save="1"/>
                          </group>
                        </group>
                      </page>
                    </notebook>
                  </sheet>
                </form>
              </field>
            </page>
            <page string="Complaint">          
              <field name="member_complaint_ids" readonly="1">
                <form>
                  <sheet>
                    <header>
                      <field name="state" widget="statusbar" statusbar_visible="new,updated,waiting for approval,resolved,refused"/>
                    </header>
                    <group>
                      <group>
                        <field name="subject"/>
                      </group>
                      <group>
                        <field name="victim_id" string="Victims"/>
                      </group>
                    </group>
                    <group>
                      <field name="circumstances"/>
                    </group>
                    <notebook>
                      <page string="Report Comment" readonly="1">
                        <group>
                          <group>
                            <field name="handler"/>
                          </group>
                          <group>
                            <field name="date_of_remedy"/>
                            <field name="duration_of_remedy"/>
                          </group>
                        </group>
                        <group>
                          <field name="conclusion_report"/>
                        </group>
                      </page>
                    </notebook>
                  </sheet>
                </form>
              </field>
            </page>
            <page string="Attachment">
              <button name="add_attachment" string="Attachment" type="object" class="oe_highlight fa fa-paperclip"/>
            </page>
            <page name="archive" string="Archive Reason" attrs="{'invisible': [('active', '=', True)]}">
              <group>
                <field name="reason" string="Why Do You Want To Archive This Record?"/>
              </group>
            </page>
          </notebook>   
        </sheet>
      </form>
    </field>
  </record>

  <!-- This record will limit membership view to admins -->
  <record id="membership_members" model="ir.actions.act_window">
    <field name="name">Members</field>
    <field name="res_model">res.partner</field>
    <field name="type">ir.actions.act_window</field>
    <field name="limit">20</field>
    <field name="view_mode">activity,pivot,kanban</field>
    <!-- <field name="view_id" ref="res_partner_tree_view"/> -->
    <field name="search_view_id" ref="member_view_search"/>
    <field name="context">{}</field>
    <field name="domain">['&amp;', ('is_member', '=', True), '|', '|', '|', ('subcity_id.parent_manager.id', '=', uid), ('subcity_id.city_id.city_manager', 'in', [uid]), ('subcity_id.city_id.transfer_handler', '=', uid), ('subcity_id.city_id.responsible_id.system_admin', '=', uid)]</field>
  </record>

  <record model="ir.actions.act_window.view" id="membership_view_partner_tree_id">
      <field name="sequence" eval="1"/>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="res_partner_tree_view"/>
      <field name="act_window_id" ref="membership_members"/>
  </record>

  <record model="ir.actions.act_window.view" id="membership_view_partner_form_id">
      <field name="sequence" eval="2"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="membership_view_partner_form"/>
      <field name="act_window_id" ref="membership_members"/>
  </record>

  <record id="leaders_menu" model="ir.actions.act_window">
    <field name="name">Leaders</field>
    <field name="res_model">res.partner</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_mode">activity,pivot,kanban</field>
    <field name="limit">20</field>
    <field name="search_view_id" ref="leader_view_search"/>
    <field name="domain">['&amp;', ('is_leader', '=', True), '|', '|', '|', '|', ('wereda_id.branch_manager', '=', uid), ('subcity_id.parent_manager', '=', uid), ('subcity_id.city_id.city_manager', 'in', [uid]), ('subcity_id.city_id.transfer_handler', '=', uid), ('subcity_id.city_id.responsible_id.system_admin', '=', uid)]</field>
  </record>

  <record model="ir.actions.act_window.view" id="leader_view_partner_tree_id">
      <field name="sequence" eval="1"/>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="res_partner_leader_tree_view"/>
      <field name="act_window_id" ref="leaders_menu"/>
  </record>

  <record model="ir.actions.act_window.view" id="leader_view_partner_form_id">
      <field name="sequence" eval="2"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="membership_view_partner_form"/>
      <field name="act_window_id" ref="leaders_menu"/>
  </record>

  <record id="leagues_menu" model="ir.actions.act_window">
    <field name="name">Leagues</field>
    <field name="res_model">res.partner</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_mode">activity,pivot,kanban</field>
    <field name="limit">20</field>
    <field name="search_view_id" ref="league_view_search"/>
    <field name="domain">['&amp;', ('is_league', '=', True), '|', '|', '|', '|', ('wereda_id.branch_manager', '=', uid), ('subcity_id.parent_manager', '=', uid), ('subcity_id.city_id.city_manager', 'in', [uid]), ('subcity_id.city_id.transfer_handler', '=', uid), ('subcity_id.city_id.responsible_id.system_admin', '=', uid)]</field>
  </record>

  <record model="ir.actions.act_window.view" id="league_view_partner_tree_id">
      <field name="sequence" eval="1"/>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="res_partner_league_tree_view"/>
      <field name="act_window_id" ref="leagues_menu"/>
  </record>

  <record model="ir.actions.act_window.view" id="league_view_partner_form_id">
      <field name="sequence" eval="2"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="membership_view_partner_form"/>
      <field name="act_window_id" ref="leagues_menu"/>
  </record>

  <!-- This record will add an action for membership for certain groups -->
  <record id="default_filter_modification" model="ir.actions.act_window">
    <field name="name">Own Members</field>
    <field name="res_model">res.partner</field>
    <field name="type">ir.actions.act_window</field>
    <field name="view_mode">activity,pivot,kanban</field>
    <field name="limit">20</field>
    <field name="search_view_id" ref="member_view_search"/>
    <field name="domain">['&amp;', ('is_member', '=', True), ('wereda_id.branch_manager', '=', uid)]</field>
    <field name="context">{"default_free_member": True}</field>
  </record>

  <record model="ir.actions.act_window.view" id="own_membership_view_partner_tree_id">
      <field name="sequence" eval="1"/>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="res_partner_tree_view"/>
      <field name="act_window_id" ref="default_filter_modification"/>
  </record>

  <record model="ir.actions.act_window.view" id="own_membership_view_partner_form_id">
      <field name="sequence" eval="2"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="membership_view_partner_form"/>
      <field name="act_window_id" ref="default_filter_modification"/>
  </record>

  <!-- This record will add a bar graph to represent gender on the different subcities-->
  <record id="graphics_for_gender_subcity" model="ir.ui.view">
    <field name="name">graphic.for.gender.subcity</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <graph type="bar">
        <field name="gender"/>
        <field name="subcity_id"/>
      </graph>
    </field>
  </record>

  <!-- This record will add a pie graph to represent gender and their education level -->
  <record id="graphics_for_gender_education" model="ir.ui.view">
    <field name="name">graphic.for.gender.education</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <graph type="bar">
        <field name="education_level"/>
        <field name="gender"/>
      </graph>
    </field>
  </record>

  <!-- This record will compare age and gender -->
  <record id="graphics_for_age_gender" model="ir.ui.view">
    <field name="name">graphic.for.age.gender</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <graph type="bar">
        <field name="age" type="row" interval="week"/>
        <field name="gender" type="col"/>
      </graph>
    </field>
  </record>

  <!-- This record will add a pie graph to represent state_id -->
  <record id="graphics_for_gender_membership_start" model="ir.ui.view">
    <field name="name">graphic.for.partner.4</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <graph type="bar">
        <field name="start_of_membership" type="row" interval="year"/>
        <field name="gender" type="col"/>
      </graph>
    </field>
  </record>


  <!-- This record will inherit the search options for members -->
  <record id="member_inherit_view_search" model="ir.ui.view">
    <field name="name">member.inherit.view.search</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
      <search string="Member_search">
          <filter name="is_leader" string="Leaders"/>
            <!-- <filter name="complaint_category" string="Complaint Category" context="{'group_by': 'complaint_category'}"/>
          <separator/>
            <filter name="state" string="Status" domain="[('state', 'in', ['new', 'updated'])]"/>
          <separator/>
            <filter name="duration_of_remedy" string="Duration of Remedy" domain="[('duration_of_remedy', '&lt;', 30)]"/> -->
      </search>
    </field>
  </record>

  <menuitem name="Members"
            id="membership.menu_association"
            sequence="15"
            groups="members_custom.member_group_manager,members_custom.member_group_agent"/>

  <menuitem name="Members"
            id="membership.menu_membership"
            sequence="0"
            parent="membership.menu_association"
            groups="members_custom.member_group_agent"/>

  <menuitem id="submenu_own_members"
            name="Own Members"
            parent="membership.menu_membership"
            sequence="2"
            groups="members_custom.member_group_manager,members_custom.member_group_agent"
            action="members_custom.default_filter_modification"/>

   <menuitem id="submenu_all_members"
            name="All Members"
            parent="membership.menu_membership"
            sequence="1"
            groups="members_custom.member_group_admin"
            action="membership_members"/>

  <menuitem id="leadership_views"
            name="Leaders"
            parent="membership.menu_membership"
            sequence="3"
            action="leaders_menu"/>

  <menuitem id="league_views"
            name="Leagues"
            parent="membership.menu_membership"
            sequence="4"
            action="leagues_menu"/>

  <menuitem id="minor_menus"
            name="Minor Configurations"
            parent="membership.menu_marketing_config_association"
            sequence="9"
            groups="members_custom.member_group_city_admin"/>

  <menuitem name="Configuration"
            id="membership.menu_marketing_config_association"
            parent="membership.menu_association"
            sequence="100"
            groups="members_custom.member_group_manager"/>

  <menuitem name="Reporting"
            parent="membership.menu_association"
            sequence="99"
            id="membership.menu_report_membership"
            groups="members_custom.member_group_manager"/>

  <!-- <delete model="ir.ui.menu" id="membership.menu_report_membership"/> -->
  <!-- <delete model="ir.ui.menu" id="membership.menu_membership_products"/> -->


</odoo>
