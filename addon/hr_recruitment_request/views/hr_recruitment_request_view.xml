<?xml version="1.0" encoding="UTF-8"?>
<odoo>
   <data>
   <record model="ir.ui.view" id="view_recruitment_request_form">
         <field name="name">recruitment.request.form</field>
         <field name="model">hr.recruitment.request</field>
         <field name="arch" type="xml">
            <form string="Test">
               <header>
                    <button name="button_approve" states="waiting_approval" string="Approve" type="object" class="oe_highlight" groups="hr_recruitment_request.group_recruitment_hr_approval"/>
                    <button name="button_reject" states="waiting_approval" string="Reject" type="object"  groups="hr_recruitment_request.group_recruitment_hr_approval"/>
                    <button name="button_set_draft" states="waiting_approval" string="Set To Draft" type="object" groups="hr_recruitment_request.group_request_recruitment"/>
                    <button name="button_intialize_recruitment" states="approved" string="Start recruitment" type="object" groups="hr_recruitment_request.group_recruitment_hr_approval"/>
                    <button name="button_request" states="draft" string="Request" class="oe_highlight" type="object" groups="hr_recruitment_request.group_request_recruitment"/>
                    <button name="button_done" states="in_recruitment" string="Done" class="oe_highlight" type="object" groups="hr_recruitment_request.group_request_recruitment"/>
                    <field  name="state" widget="statusbar" statusbar_visible="draft,waiting_approval,approved,in_recruitment,done,rejected" statusbar_colors='{"manager_approval":"blue"}'/>
                </header>
               <sheet>
               <div class="oe_title">
                    <h1>
                        <field name="reference_no" readonly="1"/>
                    </h1>
                </div>
               <group>
                    <group>
                        <field name="company_id"  attrs = "{'readonly':[('state', 'in', ('hr_approval','rejected','in_progress'))]}"/>
                        <field name="job_id"/>
                        <field name="department_id"></field>
                    </group>
                    <group>
                        <field name="expected_employees"></field>
                        <field name="employee_id"></field>

                    </group>
                    
                  </group>
                  <!-- <notebook>
                     <page string="Attachment">
                     <group>
                        <field name="attachment" filename="attachment_name" attrs = "{'readonly':[('state', 'in', ('hr_approval','manager_approval','rejected','in_progress'))]}" />
                        <field name="attachment_name" invisible="1"/>
                        <field name="note" />
                        </group>
                     </page>
                  </notebook> -->
               </sheet>
            </form>
         </field>
      </record>

     <record id="view_recruitment_filter" model="ir.ui.view">
            <field name="name">recruitment.request.search</field>
            <field name="model">hr.recruitment.request</field>
            <field name="arch" type="xml">
                <search string="Search Hr recruitment Request">
                    <field name="job_id" string="Job name" filter_domain="[('job_id.name', 'ilike', self)]"/>
                    <filter string="My Requests" name="my Request" domain="[('user_id', '=', uid)]"/>
                    <separator/>
                    <filter string="Draft" name="draft" domain="[('state', '=', 'draft')]" help="New Requests"/>
                    <filter string="In Process For Approval" name="in_progress_for_approval" domain="[('state', 'in', ('waiting_approval'))]" help="In negotiation"/>
                    <filter string="Approved" name="manager_approval" domain="[('state', '=', 'approved')]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Status" name="status" domain="[]" context="{'group_by': 'state'}"/>
                     </group>
                </search>
            </field>
        </record>


    <record id="view_recruitment_request_tree" model="ir.ui.view">
    <field name="name">recruitment.request.tree</field>
    <field name="model">hr.recruitment.request</field>
    <field name="arch" type="xml">
        <tree string="Hr recruitment Requests"  decoration-info="state=='draft'" decoration-muted="state=='rejected'"  decoration-success="state=='approved'">
            <field name="reference_no" />
            <field name="job_title"/>
            <field name="state"/>
        </tree>
    </field>
    </record>

    <record model="ir.actions.act_window" id="hr_recruitment_request_to_approve">
        <field name="name">recruitment Requests for Approval</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.recruitment.request</field>
        <field name="view_mode">tree,form,search</field>
        <field name="domain">[('state', '!=', 'draft')]</field>
     </record>

     <record model="ir.actions.act_window" id="action_hr_recruitment_request">
        <field name="name">recruitment Requests</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.recruitment.request</field>
        <field name="view_mode">tree,form,search</field>
        <field name="domain">[('id', '>', '0')]</field>
    </record>

   
    <menuitem name="Hr recruitment Request" id="menu_root" parent="hr_recruitment.menu_hr_recruitment_root" groups="hr_recruitment_request.group_recruitment_hr_approval,hr_recruitment_request.group_request_recruitment"/>

    

 
    
     <menuitem
        id="menu_recrutiement_requests"
        sequence="1"
        parent="menu_root"
        action="action_hr_recruitment_request" groups="hr_recruitment_request.group_recruitment_hr_approval,hr_recruitment_request.group_request_recruitment"/>
  </data>

</odoo>